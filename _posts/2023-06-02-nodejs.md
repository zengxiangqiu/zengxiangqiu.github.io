---
title: "nodejs"
date:  2023-06-02 14:12:14 +0800
categories: [language]
tags: [node]
---

vscode F1  toggle auto attach  select "仅带标识 --inspect"

打开新的terminal，npm run script

##  nodemon

window 10  stuck at 'restarting due to changes',和window env 配置有关，可能需要reboot

## knexjs

insert 返回list
whereILike 默认 collate SQL_Latin1_General_CP1_CI_AS like

build image 时可sed 替换
`RUN sed -i 's/SQL_Latin1_General_CP1_CI_AS/Chinese_PRC_CI_AS/gp' node_modules/knex/lib/dialects/mssql/query/mssql-querycompiler.js`

nodejs 退出 需销毁资源

```js
process.on('SIGINT', () => {
  logger.debug('SIGINT signal received: closing HTTP server');
  connection.destroy().then(() => {
    process.exit(0);
  });
});
```



https://stackify.com/node-js-error-handling/

https://www.mankier.com/



## debug

`npm install -g debug`


### window

`set DEBUG=*,express.router* && node --inspect index.js`

或者install dotenv, .env 文件配置

```ini
DEBUG=express.router*
```


https://www.digitalocean.com/community/tutorials/nodejs-cron-jobs-by-examples


yarn add @bull-board/ui@file:../../packages/ui
