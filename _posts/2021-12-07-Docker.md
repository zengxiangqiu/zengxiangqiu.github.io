---
title: "Docker"
date:  2021-12-07 14:14:25 +0800
categories: [category]
tags: [tag]
---

1. RabbitMQ

```docker
docker run -d --hostname my-rabbit --name some-rabbit -p 8080:15672 rabbitmq:3-management
```

测试环境下，映射端口 -p 5672:5672

`http://localhost:8080` 访问web UI 管理


docker commands

请参考

[Docker Exec Command With Examples](https://devconnected.com/docker-exec-command-with-examples)

[官网](https://docs.docker.com/engine/reference/commandline/ps/)

[docker compose up 部署多个rabbitmq实例持久化](https://dsinecos.github.io/blog/Multi-container-application-using-docker-compose#:~:text=.%2Fdata%2Flogs%3A%2Fvar%2Flog%2Frabbitmq-%20Maps%20the%20folder%20to%20store%20RabbitMQ%20logs,and%20can%20keep%20track%20of%20our%20data%20)

执行命令

```docker
docker exec -it <container> /bin/bash
```

docker inspect containerId 检查
docker ps -a 列出所有容器
docker images

docker container

- `docker container rm/start/stop containerId`
- `docker exec -it /bin/bash containerId`
- `docker run --name some_name -v ~/docker/host/redis.conf:/etc/redis/redis.conf -d redis redis-server /etc/redis/redis.conf`


redis

dir /var/lib/redis
dbfilename dump.rdb
appendonly.aof

1. redis-cli
   - auth password
   - info
   - ping/pong
   - set mykey "value"
   - get mykey
   - CONFIG SET appendonly yes/no 热修改

2. redis-server
   - sudo /etc/init.d/redis-server start/stop



#  linux

- npoc/lscpu 核数
-
- netstat 防火墙
-
- top/htop 监控
-
- rm/mv/cp sourcefile targetfile 删除 移动 复制
-
- cat filename | grep "searchstring" | wc -l (count line)





[exit, and your container is offline](https://dev.to/netk/getting-started-with-docker-running-an-ubuntu-image-4lk9)
[tty,docker -it ](https://qastack.cn/programming/30137135/confused-about-docker-t-option-to-allocate-a-pseudo-tty)
[daemon bash](https://linuxhandbook.com/exit-docker-container/)
[How to Deploy and Run Redis in Docker](https://phoenixnap.com/kb/docker-redis)
[delete all stopped containers](https://www.cloudytuts.com/tutorials/docker/how-to-remove-docker-containers-and-volumes/#:~:text=How%20to%20Remove%20Docker%20Containers%20and%20Volumes%201,of%20deleting%20Docker%20resources%20from%20the%20command-line.%20)

[如何获取 Docker 容器的 IP 地址](https://chinese.freecodecamp.org/news/how-to-get-a-docker-container-ip-address-explained-with-examples)

Docker自身的4种网络工作方式
- host：容器将不会虚拟出自己的网卡，配置自己的IP等，而是使用宿主机的IP和端口。
- None：该模式关闭了容器的网络功能。
- Container：创建的容器不会创建自己的网卡，配置自己的IP，而是和一个指定的容器共享IP、端口范围。
- Bridge：此模式会为每一个容器分配、设置IP等，并将容器连接到一个docker0虚拟网桥，通过docker0网桥以及Iptables nat表配置与宿主机通信。
